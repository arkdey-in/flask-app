{% extends "base.html" %}

{% block title %}All Roles | ARCHIVES OF CABINET AFFAIRS DEPARTMENT{% endblock %}

{% block content %}
<div class="container-fluid-custom">
    <h1>All Roles</h1>
    
    <div class="breadcrumb">
        <a href="{{ url_for('main.admDashboard') }}">Dashboard</a> &raquo;
        <a href="{{ url_for('main.usersRoles') }}">Users</a> &raquo;
        <span>All Roles</span>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="alert-messages-container">
            {% for category, message in messages %}
            <div role="alert" class="alert-message {{ category }}">
                <span>{{ message }}</span>
                <button type="button" class="close-btn" onclick="this.parentElement.style.display='none';" aria-label="Close">
                    &times;
                </button>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    {% endwith %}

    <div class="category-list-table-card">
        <div class="table-header">
            <h3>User Roles List</h3>
            <a href="{{ url_for('main.createRole') }}" class="btn btn-grd-primary">
                <i class="material-icons-outlined">add</i> Add New Role
            </a>
        </div>

        <table id="rolesTable" class="category-list-table">
            <thead>
                <tr>
                    <th style="width: 10%;">ID</th>
                    <th>Role Name</th>
                    <th style="width: 20%;">Created At</th>
                    <th style="width: 15%;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for role in all_roles %}
                <tr>
                    <td data-label="ID">{{ role.r_id }}</td>
                    <td data-label="Role Name">{{ role.role_name }}</td>
                    <td data-label="Created At">{{ role.r_created_at }}</td>
                    <td data-label="Actions">
                        <a href="{{ url_for('main.editRole', role_id=role.r_id) }}" class="btn-action btn-edit">
                            <i class="material-icons-outlined">edit</i> Edit
                        </a>
                        <form action="{{ url_for('main.deleteRole', role_id=role.r_id) }}" method="post" class="d-inline-block" onsubmit="return confirm('Are you sure you want to delete this role?');">
                            <button type="submit" class="btn-action btn-delete">
                                <i class="material-icons-outlined">delete</i> Delete
                            </button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="text-center py-4">No roles found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
/* Add any specific styles from the old file here if needed */
</style>

<script>
// Add any JavaScript from the old file here if needed
$(document).ready(function() {
    $('#rolesTable').DataTable({
        "responsive": true,
        "autoWidth": false,
    });
});
</script>
{% endblock %}